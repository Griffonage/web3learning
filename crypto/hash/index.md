---
title: 杂凑函数
sidebar_label: 杂凑函数
sidebar_position: 50
image: /img/bac111.png
description: 杂凑函数
---

### 杂凑函数背景

杂凑函数，通常也被称作哈希函数 (Hash function)，通过对一段消息或数据进行压缩处理，使数据长度从**可变动长度**变为**固定长度**，一个常见的杂凑函数模型如下图所示：

![hash](./assets/hash.png)

在理论上对于一个 Hash 值，理论上存在若干个输入消息与之对应，这时就产生了**碰撞**。一个好的 Hash 函数应具备抗**碰撞**的特性。

一个好的哈希函数需要满足如下基本需求：

| 需求     | 描述                                       |
| ------ | ---------------------------------------- |
| 输入长度可变 | hash函数可以应用于任意长度的数据                       |
| 输出长度固定 | hash函数的输出长度固定                            |
| 运算效率     | 对于任意的杂凑函数输入 $x$，计算 $H(x)$ 是容易的                 |
| 单向性    | 对于任意哈希值h，想要找到满足$H(x)=h$ 的x在计算上是复杂且难以实现的。       |
| 抗弱碰撞性  | 对于任意消息x，找到满足另一消息y，满足$H(x)=H(y)$ ，在计算上不可行。 |
| 抗强碰撞性  | 找到任意一对满足 $H(x)=H(y)$ 的消息x和y在计算上不可行。      |
| 伪随机性   | 哈希函数的输出满足伪随机性测试标准。                       |

Hash 值存在的目的和作用如下：

- 确保消息的完整性，即确保收到的数据确实和发送时的一样（即没有修改、插入、删除或重放），防止中间人篡改。如**确保区块链交易的完整性**
- 数据冗余校验，如**区块链钱包对助记词对应私钥生成的校验信息**
- 单向口令文件，如**linux系统的解锁口令所对应的加密密文**
- 入侵检测和病毒检测中对特征码的检测及生成


| 算法类型   | 输出 Hash 值长度       | 备注    |
| ------ | ----------------- | ----------------- |
| MD5    | 128 bit  | 不安全  |
| SHA1   | 160 bit           | 不安全          |
| SHA256 | 256 bit           | 安全           |
| SHA3 | 224 256 384 512 bit | NIST 摘要竞赛优胜算法，与 Keccak-256 在使用的加密参数上存在一些区别 |
| Keccak-256 | 256 bit | 以太坊实现并使用的摘要算法，与 SHA3 在使用的加密参数上存在一些区别 |

为了佐证 SHA3 与 Keccak-256 的区别，我们将给出一个例子，用一个给定输入的已知结果来判断及区分 Keccak-256 与 SHA3 算法，用于测试杂凑函数最通用的方法是使用空的输入。如果使用杂凑函数计算输入的空字符串的哈希值，应得到如下结果，这一例子也很好的佐证了**由于底层使用加密参数存在不同，同一输入产生的杂凑值结果差异极大**：

```
SHA3("") = a7ffc6f8bf1ed76651c14756a061d662f580ff4de43b49fa82d80a4b80f8434a

Keccak-256("") = c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470
```



### 杂凑函数2

### 杂凑函数3

### 杂凑函数4